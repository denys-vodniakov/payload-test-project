# –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ –≤ Vercel Blob Storage

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (`public/media`) –≤ Vercel Blob Storage.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Vercel Blob Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - –°–æ–∑–¥–∞–Ω Blob Storage –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Vercel
   - –ü–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω `BLOB_READ_WRITE_TOKEN`

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:**
   - `BLOB_READ_WRITE_TOKEN` - —Ç–æ–∫–µ–Ω –∏–∑ Vercel Blob Storage
   - `POSTGRES_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - `PAYLOAD_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Payload

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

1. –î–æ–±–∞–≤—å—Ç–µ `BLOB_READ_WRITE_TOKEN` –≤ –≤–∞—à `.env.local` —Ñ–∞–π–ª:
   ```bash
   BLOB_READ_WRITE_TOKEN=vercel_blob_xxxxx
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:
   ```bash
   pnpm migrate:media-to-blob
   ```

### –ù–∞ Vercel (Production)

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `BLOB_READ_WRITE_TOKEN` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ Vercel

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Vercel CLI –∏–ª–∏ —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π API endpoint:
   ```bash
   vercel env pull .env.local
   pnpm migrate:media-to-blob
   ```

   –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π API endpoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `media` —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ URL
2. ‚úÖ –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ `public/media` –∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ HTTP
3. ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ Vercel Blob Storage
4. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –Ω–æ–≤—ã–º–∏ URL –∏–∑ Blob Storage
5. ‚úÖ –ú–∏–≥—Ä–∏—Ä—É–µ—Ç thumbnails –∏ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (sizes)

## –ß—Ç–æ –ù–ï –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ Blob Storage (URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`)
- –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ HTTP

## –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:

1. ‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ Blob Storage
2. ‚ö†Ô∏è –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤ `public/media` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (–Ω–æ –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç–∫–∞—Ç–∞)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ —Å–∞–π—Ç–µ

## –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ –Ω–µ—É–¥–∞—á–Ω–æ:

1. –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ `public/media`
2. –ó–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
3. –ò–ª–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é (—Å–∫—Ä–∏–ø—Ç –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)

## –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—É–∂–µ –≤ Blob Storage)
- ‚ùå –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–í –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–≤–æ–¥–∫–∞:
```
üìä Migration Summary:
   ‚úÖ Migrated: X
   ‚è≠Ô∏è  Skipped: Y
   ‚ùå Errors: Z
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ 1000 –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑ (–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `limit` –≤ –∫–æ–¥–µ)
- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –º–∏–≥—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –∏–ª–∏ –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —Å–Ω–∞—á–∞–ª–∞

