# üîí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Access Control**

**–ü—Ä–æ–±–ª–µ–º–∞**: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –≤–æ–ø—Ä–æ—Å–æ–≤

```typescript
// ‚ùå –ë—ã–ª–æ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):
create: () => true, // Temporarily allow all users to create tests for debugging

// ‚úÖ –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
create: ({ req: { user } }) => Boolean(user),
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ñ–∞–π–ª–∞—Ö**:

- `src/collections/Tests/index.ts`
- `src/collections/Questions/index.ts`

### 2. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

**–ü—Ä–æ–±–ª–µ–º–∞**: –•–∞—Ä–¥–∫–æ–¥ —Å–ª–∞–±–æ–≥–æ –ø–∞—Ä–æ–ª—è `admin123`

```javascript
// ‚ùå –ë—ã–ª–æ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):
password: 'admin123'

// ‚úÖ –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
const adminPassword = process.env.ADMIN_PASSWORD || crypto.randomBytes(16).toString('hex')
```

**–£–ª—É—á—à–µ–Ω–∏—è**:

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–æ–≥–æ –ø–∞—Ä–æ–ª—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è

### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ TypeScript**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` —Ç–∏–ø–∞ –≤ —Ö—É–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```typescript
// ‚ùå –ë—ã–ª–æ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):
const hasCorrectAnswer = data.options.some((option: any) => option.isCorrect === true)

// ‚úÖ –°—Ç–∞–ª–æ (—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ):
interface QuestionOption {
  text: string
  isCorrect: boolean
}
const hasCorrectAnswer = data.options.some((option: QuestionOption) => option.isCorrect === true)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:

- ‚úÖ –°–æ–∑–¥–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `QuestionOption`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `any` –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 4. **–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞**

**–£–¥–∞–ª–µ–Ω–æ**:

- ‚úÖ –§–∞–π–ª `debugTestCreation.ts`
- ‚úÖ –ò–º–ø–æ—Ä—Ç –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Ö—É–∫–∞
- ‚úÖ –í—ã–∑–æ–≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Ö—É–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π**:

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
const adminPassword = process.env.ADMIN_PASSWORD || crypto.randomBytes(16).toString('hex')

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
console.log('‚ö†Ô∏è  IMPORTANT: Save these credentials securely!')
console.log('‚ö†Ô∏è  Change the password after first login!')
```

### **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:

```typescript
interface QuestionOption {
  text: string
  isCorrect: boolean
}

export const validateQuestion: CollectionBeforeChangeHook = ({ data, operation }) => {
  const hasCorrectAnswer = data.options.some((option: QuestionOption) => option.isCorrect === true)
  // ...
}
```

### **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Access Control**:

```typescript
access: {
  read: () => true,                    // –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
  create: ({ req: { user } }) => Boolean(user),  // –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
  update: ({ req: { user } }) => Boolean(user),  // –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
  delete: ({ req: { user } }) => Boolean(user),   // –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
}
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:

- ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚ùå –°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ùå –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:

- ‚úÖ –ü–æ–ª–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏
- ‚úÖ –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –ø–∞—Ä–æ–ª–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å TypeScript
- ‚úÖ –ß–∏—Å—Ç—ã–π –∫–æ–¥ –±–µ–∑ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### **–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
ADMIN_EMAIL=your-email@domain.com ADMIN_PASSWORD=your-secure-password pnpm run create-admin

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
pnpm run create-admin
```

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:

```bash
# .env —Ñ–∞–π–ª
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=your-super-secure-password-here
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ **–ü–∞—Ä–æ–ª–∏**: –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –ø–∞—Ä–æ–ª–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **–¢–∏–ø—ã**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ **–ö–æ–¥**: –£–¥–∞–ª–µ–Ω –≤–µ—Å—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: üöÄ –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
**–î–∞—Ç–∞**: $(date)
